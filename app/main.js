!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t,n){"use strict";var o={tag:function(e,t,n){var o,r,i,a,s={};if(o=document.createElement(e),t&&"object"==typeof t)for(i in t.link&&(s[t.link]=o,t.link=null),t)null!==t[i]&&(o[i]=t[i]);for(r=2;r<arguments.length;r++)if((a=arguments[r])&&a.$node)for(i in o.appendChild(a.$node),a.links)s[i]=a.links[i];else o.appendChild(document.createTextNode(a));return{$node:o,links:s}}};e.exports=o},function(e,t,n){"use strict";var o=n(3);function r(e){var t,n,r,i=this;o.call(this),this.private={hidden:!1,focusable:!1,focused:!1},e.name&&(this.name=e.name),this.$node=r=e.$node||document.createElement("div"),n=e.modifiers||[],t=[this.name],n.length&&n.forEach(function(e){t.push(i.name+"--"+e)}),r.className+=t.join(" "),e.focusable&&(this.focusable=!0),e.focusable&&e.focused&&(this.focused=!0),e.hidden&&(this.hidden=!0),e.content&&this.add.apply(this,e.content),e.events&&this.addListeners(e.events)}r.prototype=Object.create(o.prototype),r.prototype.constructor=r,Object.defineProperties(r.prototype,{focusable:{get:function(){return this.private.focusable},set:function(e){var t=this,n=this.$node,o=this.name+"--focused";e=!!e,this.private.focusable===e||(this.private.focusable=e,e?(n.setAttribute("tabIndex","0"),this.private.onfocus=function(e){n.classList.add(o),t.events.focus&&t.emit("focus",e)},this.private.onblur=function(e){n.classList.remove(o),t.events.blur&&t.emit("blur",e)},n.addEventListener("focus",this.private.onfocus),n.addEventListener("blur",this.private.onblur)):(n.removeAttribute("tabIndex"),n.removeEventListener("focus",this.private.onfocus),n.removeEventListener("blur",this.private.onblur),delete this.private.onfocus,delete this.private.onblur,this.focused=!1))}},focused:{get:function(){return this.private.focused},set:function(e){e?(this.$node.focus(),document.activeElement,this.$node):this.$node.blur()}},hidden:{get:function(){return this.private.hidden},set:function(e){var t=this.$node,n=this.name+"--hidden";e=!!e,this.private.hidden===e||(this.private.hidden=e,e?(t.classList.add(n),this.events.hide&&this.emit("hide")):(t.classList.remove(n),this.events.show&&this.emit("show")))}}}),r.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],this.$node.appendChild(t.$node||t)},r.prototype.remove=function(){var e=this.$node.parentNode;e&&e.removeChild(this.$node),this.events.remove&&this.emit("remove"),this.events={}},e.exports=r},function(e,t,n){"use strict";var o=new(n(3));o.config=n(11),e.exports=o},function(e,t,n){"use strict";function o(){this.events={}}o.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var n=this;this.events[e]=this.events[e]||[],this.events[e].push(function o(){n.removeListener(e,o),t.apply(n,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,n=this.events[e];if(n)for(t=0;t<n.length;t++)n[t].apply(this,Array.prototype.slice.call(arguments,1))}},o.prototype.constructor=o,e.exports=o},function(e,t,n){"use strict";(function(t){var n=t("div",{className:"preloader"},t("div",{className:"preloader__circle"}));e.exports={$node:n.$node,show:function(){return n.$node.classList.add("preloader--visible")},hide:function(){return n.$node.classList.remove("preloader--visible")}},window.q=e.exports}).call(this,n(0)["tag"])},function(e,t,n){"use strict";var o=n(1);function r(e){var t,n=this,r=this;e.focusable=!0,o.call(this,e),t=this.$node,Object.defineProperties(this,{}),e.render&&(this.render=e.render),this.data=e.data,t.addEventListener("click",function(e){for(var n=e.target;n.parentNode!==t;)n=n.parentNode;r.events.click&&r.emit("click",e),e.defaultPrevented||(r.$focusItem=n)}),t.addEventListener("wheel",function(){n.$node.classList.add("list--scrolled"),clearTimeout(n.private.scrollTimeout),n.private.scrollTimeout=setTimeout(function(){n.$node.classList.remove("list--scrolled")},2e3)})}r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.name="list",Object.defineProperties(r.prototype,{data:{get:function(){return this.private.data},set:function(e){var t=this.$node,n=document.createDocumentFragment(),o=this.private;if(e=e||[],Array.isArray(e)){for(this.events.data&&this.emit("data",e,o.data),o.data=e;t.lastChild;)t.removeChild(t.lastChild);o.focusIndex=o.$focusItem=null,e.forEach(function(e,t){var o=document.createElement("div");o.dataset.index=t,o.className=this.name+"__item",this.render(o,e),n.appendChild(o)},this),t.appendChild(n)}}},$focusItem:{get:function(){return this.private.$focusItem},set:function(e){var t=this.private,n=t.$focusItem,o=t.focusIndex,r=this.name+"__item--focused";(e&&e.parentNode===this.$node||!e)&&(e===n||(n&&(n.classList.remove(r),this.events["blur:item"]&&this.emit("blur:item",t.data[o],n,o)),t.$focusItem=n=e||null,t.focusIndex=o=n?Number(n.dataset.index):null,n&&(n.classList.add(r),this.events["focus:item"]&&this.emit("focus:item",t.data[o],n,o))))}},focusIndex:{get:function(){return this.private.focusIndex},set:function(e){var t,n=this.private;null==e?this.$focusItem=null:(e=Number(e),n.focusIndex===e||e>=0&&e<n.data.length&&(t=this.$node.children[e],this.$focusItem=t))}}}),r.prototype.render=function(e,t){e.textContent=t},e.exports=r},function(e,t,n){"use strict";var o=n(7),r=o(n(23)),i=o(n(26)),a=n(2),s=n(27),c=a.config.host,l="desktop-player-session-data",u=n(12).map;window.core={backend:{addListener:function(){},request:s.request},stalker:s},a.backend={},a.stalker=s,a.stalker.lang=a.config.language,a.stalker.oncredenitalsrequired=function(){return a.emit("authorization:error")},e.exports={STATE_AUTHORIZED:Symbol(),STATE_NOT_AUTHORIZED:Symbol(),init:function(){var e=this;return new Promise(function(t){var n;try{n=JSON.parse(localStorage.getItem(l)),Object.assign(s.session,n),s.host=a.config.host,s.authHost=a.config.host,a.user={login:n.userLogin},e.ping().then(function(){t({state:e.STATE_AUTHORIZED}),a.emit("authorization:login")}).catch(function(){return t({state:e.STATE_NOT_AUTHORIZED})})}catch(n){t({state:e.STATE_NOT_AUTHORIZED})}})},login:function(e){var t={address:c,activationCode:e.activationCode||""},n={};return t.login=e.login,t.password=e.password,new Promise(function(e,o){s.auth.login(t,function(r,i){r?o({state:u[r.error_description]}):(a.user={login:t.login},n.refreshToken=i["refresh_token"],n.accessToken=i["access_token"],n.userId=i["user_id"],n.userLogin=t.login,a.emit("authorization:login"),e({state:self.STATE_AUTHORIZED}),localStorage.setItem(l,JSON.stringify(n)))})})},signOut:function(){localStorage.removeItem(l),location.reload()},getSettings:function(){return new Promise(function(e,t){s.request("/settings",{onload:function(n,o){n?t(n):e(o.data)},onerror:t})})},getProfileInfo:function(){return new Promise(function(e,t){s.request("/profile",{onload:function(n,o){n?t(n):e(o.data)},onerror:t})})},getThemeData:function(e){return new Promise(function(t,n){s.request("/themes/"+e+"?colorSpace=rgba_hex&screenResolution=1920x1080",{onload:function(e,o){e?n():t(o.data)},onerror:n})})},getAllUserInfo:function(){var e=(0,i.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getProfileInfo();case 2:return t=e.sent,e.next=5,this.getSettings();case 5:return t.settings=e.sent,e.next=8,this.getThemeData(t.settings.themes[t.settings.theme].alias);case 8:return t.theme=e.sent,t.theme.logoFilename&&t.theme.logoFilename.value&&(t.logoPath=t.theme.logoFilename.value),e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),ping:function(){return new Promise(function(e,t){s.request("/ping",{onload:function(n,o){n?t(n):e(o)},onerror:function(e){t(e)}})})}}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var o=new(n(3));e.exports={instance:o}},function(e,t,n){"use strict";var o,r,i,a,s=n(10),c=n(38),l=n(16),u=n(17),d=[],f=window.core.backend.request,h=500,p=60,g=30,v=10,m={addCount:0,updateCount:0,deleteCount:0},A=[],y={};function k(){!d.length&&m.deleteCount<v?m.deleteCount++:(m.deleteCount=0,f("tv-channels/deleted?from="+i+"&t="+ +new Date,{onload:function(e,t){!e&&t&&(i=t.timestamp,t.data.length&&(u.list=u.list.filter(function(e){return t.data.indexOf(e.id)<0}),d.forEach(function(e){e.emit("channels:delete",{data:t.data})})))}}))}function w(){!d.length&&m.updateCount<v?m.updateCount++:(m.updateCount=0,f("tv-channels/modified?from="+r+"&t="+ +new Date,{onload:function(e,t){var n,o={};if(!e&&t&&(r=t.timestamp,t.data.length)){for(t.data.forEach(function(e){o[e.id]=new c(e)}),n=0;n<u.list.length;n++)o[u.list[n].id]&&(u.list[n]=o[u.list[n].id]);d.forEach(function(e){e.emit("channels:modified",{data:t.data})})}}}))}function b(e,t){var n="tv-channels",s=Date.now()/1e3;n+="?limit="+h,(e=e||{}).offset&&(n+="&offset="+e.offset),f(n+="&t="+s,{onload:function(n,s){var l;if(n);else{for(l=0;l<s.data.length;l++)A.push(new c(s.data[l]));a||(a=s.paging.total),A.length<a?(e.offset=A.length,b(e,t)):(u.list=A,A=[],a=0,e.eventName=e.eventName||"ready",e.update&&d.forEach(function(e){e.emit("update")}),t&&t(!1),o=i=r=s.timestamp)}},onerror:function(){t(!0)}})}function E(){s.call(this),this.backgroungCheckInterval=null}window.core.backend.addListener("message",function(e){switch(e.type){case"update_subscription":b({update:!0})}}),y.addChannelsInterval=setInterval(function(){var e;!d.length&&m.addCount<v?m.addCount++:(e="tv-channels/added?from="+o+"&t="+ +new Date,m.addCount=0,f(e,{onload:function(e,t){!e&&t&&(o=t.timestamp,t.data.length&&(t.data=t.data.map(function(e){return new c(e)}),u.list=u.list.concat(t.data),d.forEach(function(e){e.emit("channels:add",{data:t.data})})))}}))},18e4),setTimeout(function(){y.deleteChannelsInterval=setInterval(k,18e4)},15e3),setTimeout(function(){y.updateChannelsInterval=setInterval(w,18e4)},3e4),E.prototype=Object.create(s.prototype),E.prototype.constructor=E,E.prototype.getChannels=function(e,t){var n,o=u.list;e.favorite&&(o=o.filter(function(e){return!!e.favorite})),e.genre&&(o=o.filter(function(t){return t.genre.id===e.genre})),o=e.byName?o.sort(function(e,t){return e.name>t.name?1:-1}):o.sort(function(e,t){return e.number>t.number?1:-1}),e.pvr&&(o=o.filter(function(e){return e.pvr||e.local_pvr})),e.search&&(n=new RegExp(e.search,"i"),o=o.filter(function(e){var t=e.name.match(n),o=e.number.toString().match(n);return t&&t.length||o&&o.length})),t(!1,o)},E.prototype.updateChannelsList=function(e){b(null,e)},E.prototype.getCategories=function(e){f("tv-genres",{onload:function(t,n){t?e&&e(!0):e&&e(!1,n.data)},onerror:function(){e&&e(!0)}})},E.prototype.getLastChannelId=function(e){f("storage/lastChannel",{method:"GET",onload:function(t,n){t&&e?e(t,null):e&&n.data.value&&e(!1,n.data.value)},onerror:function(){e&&e(!0,null)}})},E.prototype.getEpgLink=function(e,t){var n="tv-channels/"+e.channelId+"/epg/"+e.epgId+"/link";f(n,{onload:function(e,n){e?t(!0,[]):t(!1,n.data)},onerror:function(){t(!0,[])}})},E.prototype.getChannelsEpg=function(e,t){var n,o,r,i,a={};return r=(e=e||{}).channels,n=r.length>1,i=e.from||e.to?"from="+(Math.round(e.from/1e3)||"")+"&to="+(Math.round(e.to/1e3)||""):"next=1",r.forEach(function(e){a[e.id]=e}),o="tv-channels/"+encodeURIComponent(r.map(function(e){return e.id}).join(","))+"/epg?"+i,f(o,{onload:function(e,o){var i={};e&&t?t(!0,[]):(Object.keys(o.data).forEach(function(e){var t=n?e:r[0].id,s=n?o.data[e]:o.data;i[t]=[],s.forEach(function(e){e.channel=a[t],i[t].push(new l(e))})}),t(!1,i))},onerror:function(){t(!0,[])}})},E.prototype.destroy=function(){var e=d.indexOf(this);e&&(d=d.splice(e,1))},E.prototype.startBackgroundCheck=function(){var e=this;function t(){var e=60*(Math.floor(Math.random()*p)+g)*1e3;return e/6e4>60&&(e=t()),e}this.backgroungCheckInterval=setTimeout(function n(){var o=u.list.length;b({},function(r){o!==u.list.length&&e.emit("update"),e.backgroungCheckInterval=setTimeout(n,t())})},t())},E.prototype.stopBackgroundCheck=function(){clearTimeout(this.backgroungCheckInterval)},e.exports=function(e,t){var n=new E;d.push(n),t(null,n)}},function(e,t,n){"use strict";function o(){this.events={}}o.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var n=this;this.events[e]=this.events[e]||[],this.events[e].push(function o(){n.removeListener(e,o),t.apply(n,arguments)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},emit:function(e){var t,n=this.events[e];if(n)for(t=0;t<n.length;t++)n[t].apply(this,Array.prototype.slice.call(arguments,1))}},o.prototype.constructor=o,e.exports=o},function(e,t,n){"use strict";e.exports={language:localStorage.getItem("language")||navigator.language.split("-")[0].toLowerCase()||"en",supportedLanguages:[{code:"ru",title:"rus"},{code:"en",title:"eng"}],host:location.protocol+"//"+location.host+"/",user:{},programListUpdateInterval:3e5,saveLastChannelTimeout:3e3,licenseKeyLength:12}},function(e,t,n){"use strict";e.exports={errors:{ERROR_NEED_LICENSE_KEY:0,ERROR_ACCOUNT_DISABLED:1,ERROR_WRONG_LICENSE_KEY:2,ERROR_WRONG_LOGIN:3,ERROR_WRONG_META_DATA:4,ERROR_WRONG_OPERATOR_ID:5},map:{"Automatic activation code issuing disabled for user.":0,"Account is disabled":1,"License key not found":2,"Username or password is incorrect":3,"Meta data mismatch":4,"Operator ID mismatch":5}}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){"use strict";(function(t,o){var r=n(7),i=r(n(13)),a=r(n(35)),s=r(n(14)),c=n(1),l=n(5),u=function(e){function n(n){var o;void 0===n&&(n={});var r,i=new l({modifiers:["select"],hidden:!0,render:function(e,t){return e.innerText=t.label}}),s=t("div",null,t("div",{link:"$value",className:"select__value"}),i);return n.$node=s.$node,n.name=n.name||"select",o=e.call(this,n)||this,r=(0,a.default)(o),o.links=s.links,o.links.list=i,o.private.data=[],o.private.current=n.current,o.current=n.current,n.data&&(o.data=n.data),o.$node.addEventListener("click",function(){r.links.list.hidden=!r.links.list.hidden}),i.addListener("focus:item",function(e){r.links.$value.innerText=e.label||"",r.emit("focus:item",e)}),o}return(0,s.default)(n,e),(0,i.default)(n,[{key:"data",set:function(e){if(!Array.isArray(e))throw new Error(o+": wrong data type");this.private.data=e,this.links.list.data=e},get:function(){return this.private.data}},{key:"current",get:function(){return this.private.current},set:function(e){e&&(this.private.current=e,this.links.$value.innerText=e.label)}}]),n}(c);e.exports=u}).call(this,n(0)["tag"],"/index.js")},function(e,t,n){"use strict";var o=window.core.backend.request;function r(e){e=e||{},this.downloadable=e.downloadable,this.start=e.start,this.end=e.end,this.title=e.name,this.id=e.id,this.archive=e.in_archive,this.channel=e.channel}r.prototype={},r.prototype.constructor=r,r.prototype.getLink=function(e){var t="tv-channels/"+this.channel.id+"/epg/"+this.id+"/link";o(t,{onload:function(t,n){t?e(!0,null):e(!1,n.data)},onerror:function(){e(!0,null)}})},e.exports=r},function(e,t,n){"use strict";var o,r;o={list:[],findByNumber:(r="number",function(e){var t,n,i;for(t=o.list.length,n=0;n<t;n++)if(void 0!==(i=o.list[n])[r]&&i[r].toString()===e.toString())return i;return!1})},e.exports=o},function(e,t,n){"use strict";(function(t){var o=n(1),r=n(5),i=n(15),a=n(2),s=n(6),c=new r({modifiers:["header"],hidden:!0,data:[{text:gettext("Profile"),action:function(){return a.tabSet.current=a.pages.profile}},{text:gettext("Sign out"),action:s.signOut}],render:function(e,t){return e.innerText=t.text}}),l=new i({data:a.config.supportedLanguages.map(function(e){return{label:e.title.toUpperCase(),value:e}}),events:{"focus:item":function(e){e.value.code!==a.config.language&&(localStorage.setItem("language",e.value.code),location.reload())}}}),u=t("div",null,t("div",{className:"header__content"},t("img",{link:"$logo",className:"header__logo",src:"./img/logo.placeholder.svg"}),t("div",{link:"$tvChannel",className:"header__menu-item"},gettext("TV channels")),t("div",{className:"header__menu-item header__menu-item--disabled"},gettext("Video club")),t("div",{className:"header__user"},t("div",{className:"header__user-logo"}),t("div",{link:"$userName",className:"header__user-name"},"John doe"),c),l)),d=new o({name:"header",hidden:!0,$node:u.$node});l.$node.classList.add("header__select"),l.current=l.data[l.data.findIndex(function(e){return e.value.code===a.config.language})],Object.defineProperties(d,{userName:{set:function(e){d.private.userName=e,u.links.$userName.innerText=e},get:function(){return d.private.userName}},logo:{set:function(e){d.private.logoPath=e,u.links.$logo.src=e},get:function(){return d.private.logoPath}}}),c.addListener("focus:item",function(e){e.action&&e.action(),c.$focusItem=null}),u.links.$userName.addEventListener("click",function(){c.hidden=!c.hidden}),u.links.$tvChannel.addEventListener("click",function(){a.tabSet.current!==a.pages.channels&&(a.tabSet.current=a.pages.channels)}),document.addEventListener("click",function(e){e.target!==u.links.$userName&&(c.hidden=!0),e.target!==l.links.$value&&(l.links.list.hidden=!0)}),e.exports=d}).call(this,n(0)["tag"])},function(e,t,n){"use strict";var o=n(20),r=n(22),i=n(2),a=n(6),s=n(4);o.load({name:i.config.language},function(){var e={},t=new r({$node:document.body,content:[e.login=n(29),e.channels=n(34),e.profile=n(45)]});i.tabSet=t,i.pages=e,i.header=n(18),i.addListener("authorization:login",function(){i.header.userName=i.user.login,a.getAllUserInfo().then(function(t){e.profile.init(t),t.logoPath&&(i.header.logo=t.logoPath)})}),i.addListener("authorization:error",function(){return a.signOut()}),document.body.appendChild(n(4).$node),document.body.appendChild(i.header.$node),s.show(),a.init().then(function(n){s.hide(),n.state===a.STATE_NOT_AUTHORIZED?t.current=e.login:n.state===a.STATE_AUTHORIZED&&(t.current=e.channels)})})},function(e,t,n){"use strict";var o=n(3),r=n(21),i=new o;function a(e){var t=new r(e);return window.gettext=window._=t.gettext,window.pgettext=t.pgettext,window.ngettext=t.ngettext,t}i.defaultLanguage="en",i.load=function(e,t){var n;return e.ext=e.ext||"json",e.path=e.path||"lang",e.name===i.defaultLanguage?(a(),t(null),!1):((n=new XMLHttpRequest).onload=function(){try{a(JSON.parse(n.responseText)),t(null),i.events["load"]&&i.emit("load")}catch(e){n.onerror(e)}},n.ontimeout=n.onerror=function(e){a(),t(e),i.events["error"]&&i.emit("error",e)},n.open("GET",e.path+"/"+e.name+"."+e.ext,!0),n.send(null),!0)},e.exports=i},function(module,exports,__webpack_require__){"use strict";function Gettext(config){var data,meta;config=config||{},data=config.data||{},data[""]=data[""]||{},meta=config.meta,this.gettext=function(e){return data[""][e]||e},this.pgettext=function(e,t){return data[e]&&data[e][t]||t},this.ngettext=function(msgId,plural,value){var n,evalResult;return data&&meta&&data[""][msgId]?(evalResult=eval("n = "+value+"; "+meta.plural),"boolean"==typeof evalResult&&(evalResult=+evalResult),data[""][msgId][evalResult]):1===value?msgId:plural}}Gettext.prototype.constructor=Gettext,module.exports=Gettext},function(e,t,n){"use strict";var o=n(1);function r(e){o.call(this,e),this.private.current=null}r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.name="tab-set",Object.defineProperties(r.prototype,{current:{get:function(){return this.private.current},set:function(e){var t=this.private.current;e===t||(t&&(t.hidden=!0),this.private.current=e,e.hidden=!1,this.events.switch&&this.emit("switch",t,e))}}}),r.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++)(t=arguments[e]).hidden=!0,this.$node.appendChild(t.$node)},e.exports=r},function(e,t,n){e.exports=n(24)},function(e,t,n){var o=function(){return this||"object"==typeof self&&self}()||Function("return this")(),r=o.regeneratorRuntime&&Object.getOwnPropertyNames(o).indexOf("regeneratorRuntime")>=0,i=r&&o.regeneratorRuntime;if(o.regeneratorRuntime=void 0,e.exports=n(25),r)o.regeneratorRuntime=i;else try{delete o.regeneratorRuntime}catch(e){o.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,o=Object.prototype,r=o.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag",l="object"==typeof e,u=t.regeneratorRuntime;if(u)l&&(e.exports=u);else{(u=t.regeneratorRuntime=l?e.exports:{}).wrap=k;var d="suspendedStart",f="suspendedYield",h="executing",p="completed",g={},v={};v[a]=function(){return this};var m=Object.getPrototypeOf,A=m&&m(m(N([])));A&&A!==o&&r.call(A,a)&&(v=A);var y=x.prototype=b.prototype=Object.create(v);E.prototype=y.constructor=x,x.constructor=E,x[c]=E.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(y),e},u.awrap=function(e){return{__await:e}},C(I.prototype),I.prototype[s]=function(){return this},u.AsyncIterator=I,u.async=function(e,t,n,o){var r=new I(k(e,t,n,o));return u.isGeneratorFunction(t)?r:r.next().then(function(e){return e.done?e.value:r.next()})},C(y),y[c]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},u.values=N,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(o,r){return s.type="throw",s.arg=e,t.next=o,r&&(t.method="next",t.arg=n),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,o){return this.delegate={iterator:N(e),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=n),g}}}function k(e,t,n,o){var r=t&&t.prototype instanceof b?t:b,i=Object.create(r.prototype),a=new _(o||[]);return i._invoke=function(e,t,n){var o=d;return function(r,i){if(o===h)throw new Error("Generator is already running");if(o===p){if("throw"===r)throw i;return O()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var s=L(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=w(e,t,n);if("normal"===c.type){if(o=n.done?p:f,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=p,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function b(){}function E(){}function x(){}function C(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function I(e){var t;this._invoke=function(n,o){function i(){return new Promise(function(t,i){!function t(n,o,i,a){var s=w(e[n],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(l).then(function(e){c.value=e,i(c)},function(e){return t("throw",e,i,a)})}a(s.arg)}(n,o,t,i)})}return t=t?t.then(i,i):i()}}function L(e,t){var o=e.iterator[t.method];if(o===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,L(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=w(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,g;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(r.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t){function n(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}e.exports=function(e){return function(){var t=this,o=arguments;return new Promise(function(r,i){var a=e.apply(t,o);function s(e){n(a,r,i,s,c,"next",e)}function c(e){n(a,r,i,s,c,"throw",e)}s(void 0)})}}},function(e,t,n){"use strict";var o=n(28),r={method:"GET",async:!0,headers:{},data:null,timeout:3e4,type:"text",onload:function(){},onerror:function(){},ontimeout:null},i=n(2),a=Object.keys(r),s=[],c=!1,l={host:null,authHost:null,lang:"en",session:{account:null,accessToken:null,refreshToken:null,userId:null,macAlgorithm:null,macKey:null},request:function(e,t,o){var u,d,f=fetch();if(c)s.push({url:e,options:t});else if(c=!0,t=t||{},e&&("string"==typeof e||e instanceof String)&&e.length>0){if(t&&"object"==typeof t)for(u=0;u<a.length;u++)void 0===t[a[u]]&&(t[a[u]]=r[a[u]]);if(f=fetch(),n(8).instance.host=l.host,l.authHost=l.host+"/stalker_portal/auth/token.php",f.open(t.method,l.host+"/stalker_portal/api/v3/"+e,t.async),f.setRequestHeader("Authorization","Bearer "+l.session.accessToken),f.setRequestHeader("Content-Type","application/json"),f.setRequestHeader("Accept-Language",i.stalker.lang),t.headers&&"object"==typeof t.headers)for(d=Object.keys(t.headers),u=0;u<d.length;u++)f.setRequestHeader(d[u],t.headers[d[u]]);return f.responseType=t.type,f.timeout=t.timeout,f.onreadystatechange=function(){var n=!1;if(0===this.readyState)c=!1,s.length>0&&(n=s.shift(),i.stalker.request(n.url,n.options));else if(4===this.readyState)if(0===this.status)c=!1,s.length>0&&(n=s.shift(),i.stalker.request(n.url,n.options));else if(200===this.status){try{n=JSON.parse(this.responseText)}catch(e){n=!1}try{t.onload(!n,n)}catch(e){if(i.stalker.onfail&&i.stalker.onfail("Exception thrown "+e.message),t.onerror)try{t.onerror.call(f)}catch(e){}}c=!1,s.length>0&&(n=s.shift(),i.stalker.request(n.url,n.options))}else if(401===this.status)if(i.stalker.session&&i.stalker.session.refreshToken&&i.stalker.session.account&&i.stalker.session.account.activationCode){if(o)return void i.stalker.oncredenitalsrequired(function(){c=!1,i.stalker.request(e,t)});i.stalker.auth.refreshToken(i.stalker.session.refreshToken,function(n){n?"invalid_grant"===n.error?i.stalker.oncredenitalsrequired(function(){c=!1,i.stalker.request(e,t)}):"access_denied"===n.error&&"Account disabled"===n.error_description?i.stalker.reload():(c=!1,i.stalker.request(e,t)):(c=!1,i.stalker.request(e,t,!0))})}else i.stalker.oncredenitalsrequired(function(){c=!1,i.stalker.request(e,t)});else{c=!1;try{t.onload(this.status,this.responseText)}catch(e){if(i.stalker.onfail&&i.stalker.onfail("Exception thrown "+e.message),t.onerror)try{t.onerror.call(f)}catch(e){}}s.length>0&&(n=s.shift(),i.stalker.request(n.url,n.options))}},f.onerror=function(){if(t.onerror)try{t.onerror.call(f)}catch(e){}i.stalker.onfail&&i.stalker.onfail("Network error "+f.status)},f.ontimeout=function(){if(t.ontimeout)try{t.ontimeout.call(f)}catch(e){}},f.send(t.body||null),f}}};l.auth={login:function(e,t){var r=fetch(),a=["grant_type=password","hw_version=","serial_number="],s=0,c=setTimeout(function(){r.abort(),t("onerror "+r.status+" : "+r.responseText,!1)},6e3);a.push("username="+encodeURIComponent(e.login)),a.push("password="+encodeURIComponent(e.password)),a.push("activation_code="+encodeURIComponent(e.activationCode)),e.address=e.address.replace("/stalker_portal/",""),l.host=e.address,n(8).instance.host=l.host,l.authHost=e.address+"/stalker_portal/auth/token.php",r.open("POST",e.address+"/stalker_portal/auth/token.php",!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.timeout=5e3,r.onreadystatechange=function(){var n;if(clearTimeout(c),4===this.readyState)if(200===this.status){try{n=JSON.parse(this.responseText)}catch(e){n={}}if(n.access_token&&n.user_id){if(i.stalker.session={account:e,accessToken:null,refreshToken:null,userId:null,macAlgorithm:null,macKey:null},n.activation_code&&(i.stalker.session.account.activationCode=n.activation_code),i.stalker.session.accessToken=n.access_token,i.stalker.session.refreshToken=n.refresh_token,i.stalker.session.userId=n.user_id,n.mac_algorithm&&(i.stalker.session.macAlgorithm=n.mac_algorithm),n.mac_key&&(i.stalker.session.macKey=n.api.mac_key,i.stalker.session.macAlgorithm=l.mac_algorithm),!n.api||!n.api.v3)return void t(["404"]);i.stalker.session.macKey=n.api.v3.mac_key,i.stalker.session.macAlgorithm=n.api.v3.mac_algorithm,i.stalker.saveCallback&&i.stalker.saveCallback(),t(!1,n)}else t(n,n)}else t(this.status+" : "+this.responseText,{})},r.onerror=function(){t("onerror "+this.status+" : "+this.responseText,!1)},o.clientType(function(e,t){a.push("client_type="+encodeURIComponent(t)),5===++s&&r.send(a.join("&"))}),a.push("meta_1="+encodeURIComponent(e.login)),++s,a.push("meta_2="+encodeURIComponent(e.login)),++s,o.metric3(function(e,t){a.push("meta_3="+encodeURIComponent(t)),5===++s&&r.send(a.join("&"))}),o.network.mac(function(e,t){a.push("mac="+encodeURIComponent(t)),5===++s&&r.send(a.join("&"))})},refreshToken:function(e,t){var r=fetch(),a=0,s=["grant_type=refresh_token","hw_version=","refresh_token="+i.stalker.session.refreshToken,"activation_code="+encodeURIComponent(i.stalker.session.account.activationCode)];s.push(),r.open("POST",l.host+"/stalker_portal/auth/token.php",!0),n(8).instance.host=l.host,l.authHost=l.host+"/stalker_portal/auth/token.php",r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){var e;if(200===this.status){try{e=JSON.parse(this.responseText)}catch(t){e={}}e.access_token&&e.user_id?(i.stalker.session.accessToken=e.access_token,i.stalker.session.refreshToken=e.refresh_token,i.stalker.session.userId=e.user_id,e.mac_algorithm&&(i.stalker.session.macAlgorithm=e.mac_algorithm),e.mac_key&&(i.stalker.session.macKey=i.stalker.mac_key,i.stalker.session.macAlgorithm=i.stalker.mac_algorithm),e.api&&e.api.v3&&(i.stalker.session.macKey=e.api.v3.mac_key,i.stalker.session.macAlgorithm=e.api.v3.mac_algorithm),i.stalker.saveCallback&&i.stalker.saveCallback(),t(!1)):t(e,e)}else t(this.status+" : "+this.responseText,{})},r.onerror=function(){t(!0,{})},o.clientType(function(e,t){s.push("client_type="+encodeURIComponent(t)),5===++a&&r.send(s.join("&"))}),o.metric1(function(e,t){s.push("meta_1="+encodeURIComponent(t)),5===++a&&r.send(s.join("&"))}),o.metric2(function(e,t){s.push("meta_2="+encodeURIComponent(t)),5===++a&&r.send(s.join("&"))}),o.metric3(function(e,t){s.push("meta_3="+encodeURIComponent(t)),5===++a&&r.send(s.join("&"))}),o.network.mac(function(e,t){s.push("mac="+encodeURIComponent(t)),5===++a&&r.send(s.join("&"))})}},window.fetch=function(){return new XMLHttpRequest},e.exports=l},function(e,t,n){"use strict";e.exports={clientType:function(e){return e(!1,"Web")},metric1:function(e){return e(!1,"")},metric2:function(e){return e(!1,"")},metric3:function(e){return e(!1,"Web")},network:{mac:function(e){return e(!1,"11:11:11:11:11:11")}}}},function(e,t,n){"use strict";(function(t){var o,r,i,a=n(30),s=n(31),c=n(2),l=n(1),u=n(32),d=n(33),f=n(6),h=n(4),p=n(12).errors,g=Symbol("input_login"),v=Symbol("input_license"),m={},A={},y={},k={};function w(e,t){return'<b class="'+t+'">'+e+"</b>"}function b(e,t){return void 0===t&&(t=1),e.value.trim().length<t?e.state=e.STATE_ERROR:e.state=e.STATE_NORMAL,e.value.trim().length>=t}function E(e){switch(i=e){case g:r.links.$text.innerHTML=m.login,A.license.hidden=!0,A.login.hidden=!1,A.login.password=!1;break;case v:A.login.hidden=!0,A.password.hidden=!0,A.license.hidden=!1,r.links.$text.innerHTML=m.license}}function x(e){switch(h.hide(),e.state){case p.ERROR_WRONG_LOGIN:r.links.$loginError.innerText=gettext("Incorrect login or password"),r.links.$loginError.classList.add("welcome__error--visible");break;case p.ERROR_ACCOUNT_DISABLED:r.links.$loginError.innerText=gettext("Account is disabled"),r.links.$loginError.classList.add("welcome__error--visible");break;case p.ERROR_NEED_LICENSE_KEY:E(v);break;case p.ERROR_WRONG_LICENSE_KEY:r.links.$loginError.innerText=gettext("License key not found"),r.links.$loginError.classList.add("welcome__error--visible");break;case p.ERROR_WRONG_META_DATA:r.links.$loginError.innerText=gettext("The License Key you’ve entered has already been activated on another device. Please contact the key provider."),r.links.$loginError.classList.add("welcome__error--visible");break;case p.ERROR_WRONG_OPERATOR_ID:r.links.$loginError.innerText=gettext("The License Key doesn't work for this portal. Please contact your service provider."),r.links.$loginError.classList.add("welcome__error--visible");break;default:r.links.$loginError.innerText=gettext("Undefined error"),r.links.$loginError.classList.add("welcome__error--visible")}}function C(){var e=A.login.value,t=A.password.value;if(b(A.login)&&b(A.password)){if(k.login=e,k.password=t,r.links.$loginError.classList.remove("welcome__error--visible"),i===v){if(!b(A.license,c.config.licenseKeyLength))return r.links.$loginError.innerText=gettext("License Key must have 12 symbols"),void r.links.$loginError.classList.add("welcome__error--visible");k.activationCode=A.license.value}h.show(),f.login(k).then(function(){h.hide(),c.tabSet.current=c.pages.channels}).catch(x)}}function I(e){e.keyCode===a.enter&&C()}m.login=s(gettext("Contact your service provider and request {0} and {1} from them ."),w(gettext("login")),w(gettext("password"))),m.license=s(gettext("Contact your service provider and request {0} from them."),w(gettext("license key"))),A.login=new u({label:gettext("Login"),value:c.config.user.login,events:{keydown:I}}),A.password=new u({label:gettext("Password"),type:"password",value:c.config.user.password,events:{keydown:I}}),A.license=new u({label:gettext("License key"),value:c.config.user.activationKey,events:{keydown:I}}),y.login=new d({title:gettext("Sign in"),events:{click:C}}),o=new l({name:"page",modifiers:["login"],$node:(r=t("div",null,t("div",{className:"welcome"},t("img",{className:"welcome__logo",src:"./img/ministra.logo.svg"}),t("div",{className:"welcome__title"},gettext("Welcome to Ministra Player")),t("div",{link:"$text",className:"welcome__text text text--hint"}),t("div",{className:"welcome__error",link:"$loginError"}),t("div",{className:"welcome__error",link:"$licenseError"},gettext("The License Key has been suspended. Please contact your service provider.")),A.login,A.password,A.license,y.login))).$node}),E(g),e.exports=o}).call(this,n(0)["tag"])},function(e,t,n){"use strict";e.exports={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,del:46}},function(e,t,n){"use strict";e.exports=function(e){var t=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,n){return void 0===t[n]?e:t[n]})}},function(e,t,n){"use strict";(function(t){var o=n(7),r=o(n(13)),i=o(n(14)),a=function(e){function n(n){var o,r;return(n=n||{}).type=n.type||"text",r=t("div",null,t("div",{link:"$label",className:n.label?"input__label":"input__label--hidden"},n.label),t("input",{link:"$value",className:"input__value",type:n.type},n.value||"")),n.$node=r.$node,(o=e.call(this,n)||this).links=r.links,o.private.state=o.STATE_NORMAL,o.links.$value.addEventListener("change",function(){o.events.change&&o.emit("change",{value:o.$node.value})}),o.links.$value.addEventListener("keydown",function(e){o.events.keydown&&o.emit("keydown",e)}),n.placeholder&&(o.links.$value.placeholder=n.placeholder),n.value&&(o.links.$value.value=n.value),o}return(0,i.default)(n,e),(0,r.default)(n,[{key:"value",get:function(){return this.links.$value.value}},{key:"state",set:function(e){switch(e){case this.STATE_ERROR:this.links.$value.className="input__value input__value--error";break;case this.STATE_NORMAL:this.links.$value.className="input__value"}this.private.state=e},get:function(){return this.private.state}}]),n}(n(1));a.prototype.STATE_NORMAL=0,a.prototype.STATE_ERROR=1,a.prototype.name="input",e.exports=a}).call(this,n(0)["tag"])},function(e,t,n){"use strict";var o=n(1);function r(e){var t=this;e.focusable=!0,o.call(this,e),e.title&&(this.$node.textContent=e.title),this.$node.addEventListener("click",function(e){t.events.click&&t.emit("click",e)})}r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.name="button",e.exports=r},function(e,t,n){"use strict";(function(t){function o(){d.data[d.focusIndex+1]?d.focusIndex++:l.playChannel(u.data[u.focusIndex])}var r=n(1),i=n(15),a=n(36),s=n(18),c=n(4),l=n(42),u=n(43),d=n(44),f=new i({events:{"focus:item":function(e){c.show(),a.getChannels({genre:e.value.id}).then(function(e){u.data=e,c.hide()})}}}),h=new r({$node:t("div",null,t("div",{className:"page__channel-list channel-list"},f,u),l,t("div",{className:"page__program-list program-list"},t("div",{className:"program-list__title"},gettext("Guide")),d)).$node,name:"page",modifiers:["channels","padded"]});l.init(),l.addListener("click:live",function(){l.playChannel(u.data[u.focusIndex]),d.focusIndex=null}),h.addListeners({show:function(){s.hidden=!1,c.show(),l.addListener("end",o),a.getChannels().then(function(e){u.data=e,c.hide(),a.getLastChannelId().then(function(e){var t=u.data.findIndex(function(t){return t.id===e});-1===t&&(t=0),u.focusIndex=t}).catch(function(){u.focusIndex=0}),l.once("play",function(){setTimeout(function(){l.plugin.pause()})})}),a.getCategories().then(function(e){e=e.map(function(e){return{label:e.name,value:e}}),f.data=[{label:gettext("All channels"),value:{id:null}}].concat(e),f.current=f.data[0]})},hide:function(){l.removeListener("end",o),l.pause()}}),f.$node.classList.add("channel-list__select"),u.addListener("focus:item",function(e){var t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()/1e3,o=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1).getTime()/1e3;l.playChannel(e),e.getEpg({from:n,to:o},function(e,t){d.data=e?[]:t})}),d.addListener("focus:item",function(e){e.archive?e.getLink(function(e,t){!e&&t&&t.url&&l.playEpgProgram({uri:t.url})}):l.playChannel(u.data[u.focusIndex])}),e.exports=h}).call(this,n(0)["tag"])},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";var o;n(37).onAppInit(!1,function(e,t){o=t}),e.exports={getChannels:function(e){return void 0===e&&(e={}),new Promise(function(t,n){o.updateChannelsList(function(){o.getChannels(e,function(e,o){e?n(e):t(o)})})})},getCategories:function(){return new Promise(function(e,t){o.getCategories(function(n,o){n?t():e(o)})})},getLastChannelId:function(){return new Promise(function(e,t){o.getLastChannelId(function(n,o){n?t(n):e(Number(o))})})}}},function(e,t,n){"use strict";e.exports={onAppInit:function(e,t){n(9)(e,t)},onInit:n(39),onContentBoardInit:function(e,t){n(40)(e,t)}}},function(e,t,n){"use strict";var o=window.core.backend.request,r=n(16);function i(e){var t;for(t in e=e||{})this[t]=e[t]}i.prototype={},i.prototype.constructor=i,i.prototype.toggleFavorite=function(e){var t=this;o("tv-channels/"+this.id,{method:"PUT",body:JSON.stringify({favorite:!t.favorite}),onload:function(n){n?e(!0):(t.favorite=!t.favorite,e(!1,t.favorite))},onerror:function(){e(!0)}})},i.prototype.getUrl=function(e){this.url?e(!1,{url:this.url,solution:this.solution}):o("tv-channels/"+this.id+"/link",{onload:function(t,n){t?e(t,null):e(!1,{url:n.data.url,solution:n.data.solution})},onerror:function(){e(!0,null)}})},i.prototype.getEpg=function(e,t){var n,i,a,s=this,c=new Date;e=e||{},i=+new Date(c.getFullYear(),c.getMonth(),c.getDate()-7),a=+new Date(c.getFullYear(),c.getMonth(),c.getDate()+7),i=Math.round(i/1e3),a=Math.round(a/1e3),i=e.from||i,a=e.to||a,n="tv-channels/"+this.id+"/epg/?from="+i+"&to="+a,o(n,{onload:function(e,n){var o=[];e&&t?t(!0,[]):(n.data.forEach(function(e){e.channel=s,o.push(new r(e))}),t(!1,o))},onerror:function(){t(!0,[])}})},i.prototype.setLast=function(e){o("storage",{body:JSON.stringify({value:this.id,key:"lastChannel"}),method:"POST",onload:function(t){t&&e?e(t):e&&e(!1)},onerror:function(){e&&e(!0,null)}})},e.exports=i},function(e,t,n){"use strict";var o=n(10),r=n(17),i="magcore-app-tv",a="magcore-app-tv-classic",s={};function c(e){return core.taskManager.topApp&&core.taskManager.topApp.config.packageName===e}e.exports=function(e,t){var l=new o;l.once("system:start",function(){s.TV=core.packageMap[i],s.CLASSIC_TV=core.packageMap[a],n(9)(e,function(e,t){t.updateChannelsList(function(){window.core.backend.addListener("message",function(e){var t,n,o;e&&"play_channel"===e.type&&(t=e.msg,c(a)?n=s.CLASSIC_TV:c(i)?n=s.TV:s.CLASSIC_TV&&!s.CLASSIC_TV.locked?n=s.CLASSIC_TV:!s.TV||s.TV.locked&&!c(i)||(n=s.TV),(o=r.findByNumber(t))&&(o.censored||o.genre&&o.genre.censored)||core.taskManager.runApp({config:n,ignoreAccessControl:!0,visible:!0,onload:function(e){setTimeout(function(){e.core.emit("play:channel",{number:parseInt(t,10)})},100)}}))})})})}),t&&t(!1,l)}},function(e,t,n){"use strict";var o=n(10),r=n(9),i=n(41),a={480:{normal:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAb5JREFUWAntVr1Kw1AUTtKf2KAdYhcHEQdBBHH2ARw6dBQtIu6+hBk6+wq6CQWnPoVPoOAoDjZ0CSSlxCR+B3NKS2/SXHqLDgnc3r9zvu/c7557bzVN0wwUpV+SJBbKte/7O0uAjSoM4iVGUtOe523HcXwFJ9s0TcJ/yAGIyUDZFwTBbqPR6CIAUuCzUqn0l4EXkn88Hu8B8NJ13a0swMlkcoQV36TkbyB/1HXdz7Ln8UIB1Gq1MwAftlqtWwRyzM5ch2F4Wq/Xz9GvYv6l1+v1QR7y/Mo1rRzA3SiKHCpoXwyHw03HcQy02+nYHQUiS6bLOIDsBPZtqLFhGEaA9hfa+6i/0X/Gql9l8MhWKgByGI1GTdu2OyA+oD6+APv/ZFnWx29X7lcn+eRc1FoXSkK1lPNo03sAx8aZn1pvj5X/PwrwepHplFyUZE0eW6XG6fDgP8AJeRfhiBRQRk6E6UI6InIam+YAG/DKVeUE7TVjMsdsLVJgdn7t7TKAUoFSgVKBUoGFt4BeL7q7+b1WcRenL6IQSrQFgzwHIUrOID/HWSYLCqTv9n2Wg+pxkQKqOXLx/v5fMRIuN8J1ThL3DwPnuJXTZYA4AAAAAElFTkSuQmCC",active:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAuJJREFUaAXtmb9rFEEUx3dXEdRAIF2wkYAoCGJjKyKmCNhaHKSLlzKllWjl/5BCC8EuYKNtbL3Kwh8gEiyMqIWCcoEIend+Xnhv3dzuunPH7d6M3MKXeTPzfnzfzpvZu90oiqIjwItrMBgcB5vgoiMhb7hHkD4NXvT7fZrBJzDnmMT01SC7DL4q+W/I16bPypEBZG+B30r+JfKSo+lk1Ai4PI4n7ObAlhBX8lv0T47ja2wbAt7R4I+R510doXsGvFbbHvJtV9uJ6hF4A/xSIjvIlacHOtfBd7X5If2JkhrVGQQugy9KaB/5ZpEPxmNwF6B6cNK8RT5XpNv4GEROgedCTMk9pH/CiCDPgyeZ+acyZvNetBA6BjYzJF/RPwvOg3eZ8Xv0Ey9IF5GA3Br4qSvRRe6qvId8o8jGuzGIXgIfMnf9Pf0LdRCNJUgdjpvy6W8tOt6Bo6aXJElscgitVU7wK1CaAJtOHjxt0AEHJ4ltykm24ltjSKyRqyDdxNkSwtEiZfSI9mqT5RTH8TPirdJ+roprJRTZ3TQDuQtgW8a5dkELSEK1XOJbY+xqzG36lSuR8k4FpYdxO0N+oRbWBU6JuwAsiXaByqGhlHcq6DROOppA65BFAx1itzR2pypcyjsV/iZgj/7ayqaMHAksagLdMh0bN965TSwTopTd1GbUROsaP9VrglSdMUqfA3UGHcU3ZbUC5DQUrORsrZZsYrhv4021w/GFuI2JbDxszPsVMMJlbQgJrPNk/iggifXhRGan0PAdabrvfQnJySObVzE7hZqukMp43pcQGcxOocplnKZCCCX0z/vz/yXAI3tPUubcncofGoltHESuuopW4I0aXakyrmHeYhqH6hD2s9Q0ufPB/6kP6rVK7teorITWfxAvtgoT0CTk5ZJ871oD8pWlli/numGl5h+A+/SdXvdL6aMflSYgkz5flkDRKeQz7xy3dAVyM4EMJL1eLxCqeZrC/Q9bOOZ3iNQcwwAAAABJRU5ErkJggg=="},576:{normal:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAb5JREFUWAntVr1Kw1AUTtKf2KAdYhcHEQdBBHH2ARw6dBQtIu6+hBk6+wq6CQWnPoVPoOAoDjZ0CSSlxCR+B3NKS2/SXHqLDgnc3r9zvu/c7557bzVN0wwUpV+SJBbKte/7O0uAjSoM4iVGUtOe523HcXwFJ9s0TcJ/yAGIyUDZFwTBbqPR6CIAUuCzUqn0l4EXkn88Hu8B8NJ13a0swMlkcoQV36TkbyB/1HXdz7Ln8UIB1Gq1MwAftlqtWwRyzM5ch2F4Wq/Xz9GvYv6l1+v1QR7y/Mo1rRzA3SiKHCpoXwyHw03HcQy02+nYHQUiS6bLOIDsBPZtqLFhGEaA9hfa+6i/0X/Gql9l8MhWKgByGI1GTdu2OyA+oD6+APv/ZFnWx29X7lcn+eRc1FoXSkK1lPNo03sAx8aZn1pvj5X/PwrwepHplFyUZE0eW6XG6fDgP8AJeRfhiBRQRk6E6UI6InIam+YAG/DKVeUE7TVjMsdsLVJgdn7t7TKAUoFSgVKBUoGFt4BeL7q7+b1WcRenL6IQSrQFgzwHIUrOID/HWSYLCqTv9n2Wg+pxkQKqOXLx/v5fMRIuN8J1ThL3DwPnuJXTZYA4AAAAAElFTkSuQmCC",active:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAuJJREFUaAXtmb9rFEEUx3dXEdRAIF2wkYAoCGJjKyKmCNhaHKSLlzKllWjl/5BCC8EuYKNtbL3Kwh8gEiyMqIWCcoEIend+Xnhv3dzuunPH7d6M3MKXeTPzfnzfzpvZu90oiqIjwItrMBgcB5vgoiMhb7hHkD4NXvT7fZrBJzDnmMT01SC7DL4q+W/I16bPypEBZG+B30r+JfKSo+lk1Ai4PI4n7ObAlhBX8lv0T47ja2wbAt7R4I+R510doXsGvFbbHvJtV9uJ6hF4A/xSIjvIlacHOtfBd7X5If2JkhrVGQQugy9KaB/5ZpEPxmNwF6B6cNK8RT5XpNv4GEROgedCTMk9pH/CiCDPgyeZ+acyZvNetBA6BjYzJF/RPwvOg3eZ8Xv0Ey9IF5GA3Br4qSvRRe6qvId8o8jGuzGIXgIfMnf9Pf0LdRCNJUgdjpvy6W8tOt6Bo6aXJElscgitVU7wK1CaAJtOHjxt0AEHJ4ltykm24ltjSKyRqyDdxNkSwtEiZfSI9mqT5RTH8TPirdJ+roprJRTZ3TQDuQtgW8a5dkELSEK1XOJbY+xqzG36lSuR8k4FpYdxO0N+oRbWBU6JuwAsiXaByqGhlHcq6DROOppA65BFAx1itzR2pypcyjsV/iZgj/7ayqaMHAksagLdMh0bN965TSwTopTd1GbUROsaP9VrglSdMUqfA3UGHcU3ZbUC5DQUrORsrZZsYrhv4021w/GFuI2JbDxszPsVMMJlbQgJrPNk/iggifXhRGan0PAdabrvfQnJySObVzE7hZqukMp43pcQGcxOocplnKZCCCX0z/vz/yXAI3tPUubcncofGoltHESuuopW4I0aXakyrmHeYhqH6hD2s9Q0ufPB/6kP6rVK7teorITWfxAvtgoT0CTk5ZJ871oD8pWlli/numGl5h+A+/SdXvdL6aMflSYgkz5flkDRKeQz7xy3dAVyM4EMJL1eLxCqeZrC/Q9bOOZ3iNQcwwAAAABJRU5ErkJggg=="},720:{normal:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAA8lJREFUaAXtWctrE0EczsPEqE2LaIW0HlrEB21BiFfBguYkuVStgkel+mf00LNnDz1IL+agRSjioZeIZwsiBiGIPSViUUIfeT/8vnU2LpmUnXQncbd0YDqP/T2+b36/md1OfD6fL4jqitJqtUL1ej25t7cXUwQUDECwoSjcV7FCoXC62Ww+8vv91yKRyMNsNntcwWHDryDUdxGs/AWAvwtHJwKBQKlSqbwCiW8qjv87gVqtdh2gbwIssfzc3d1NjYyM/FYBTxmmkKPC1TuIAaYIdOcB/hb0/WgzqMu9gKdfRxHA6s3C6SyAfA0Gg2+Qv2UVMpA/g5R5ANlR6LewcdOhUOi9im6njKMIAEgZAJoAfgWAnqicHuVy+TJkFwR4pHsldVDwJOMoAjRQKpUmwuHwPXRPgUwdUXmH8Uc+sxaQpa8bAD8r5n8Vi8VUNBrdssr12ndMgA4BbhjNPMCd5xhEPmUymbfT09NVjvE8gmYOzy+JcRYp91o15aizX3GUQqZRANlOp9MvANRYeQC9OjU19Rjjs6jnMF4wwYPch6WlpZc6wNO/lgiYRNgCcBxgb6MbBFgjAhiHMa5hzI3+hXK6inYCBAYS4wB9H12mFksBeyU1NDT04+9Q319/o9FY1Gdu8Ja07IHBw/7n8ZjZxamwaPa90JqZc3gi0Lnq2Ijc4HEwjSM6o+Ik6RRzPOZJBR9b8LEBYxs4pVq9GG2nkFUJ4KMY88UzCYM+tNbHWvtcGPjgqTUOMjPwvYrxjqoTiYBYeQM8DG7D0DrqZi9GVZ1TTizWBLoJLhh8zmFuBf6UItFtD/BFREPb+Xz+OQx97hd4EqBt+qAv+qRvTMf5TKVIBJjzQnF9bGysqGJEh4zwxWj7LBhsTUsEuGGF1qattn4Bw6cFg60HiQBCyO8WI7S22poFzFQ1MaiYlwioKLlJRjqF3ASOWHAiXUSTFLjWEKWs6BuNFyKQREoNs1qItDl4gUAbbLeOFwis8f3ACgJrnSRcvwdEzj/rBG6OvRABE2vX1vURODqFusbNRZNe2ANHp5CLEkaG4oUUklFbZg4fAbyyzRtl/mM/0CL+P+bttoFBxbkUAV5xCMUJFQOaZQyfFgy25iUC4n6GiolcLnfS1oImAeErQXMWDLbWu31KbCCEM/j+nozFYk8R1kFeqwzD93eg5iWXUpEI4OsPmFurMGTcDcHKHVpCWJUM9iqEhWqrCPC82FK6E6KiRICTMLADEisw6M2rRUGCq8CfjFhdW6RN7Fqk+wDz/i801Wq1L7+T7bNgWqeJ/Q+uGajXVAGMsgAAAABJRU5ErkJggg==",active:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAA7dJREFUeAHtmj1oFEEUx/dODYKNSvALLW2CmMo+iIXaWAq2gqV2AQt7iSB2SpqATUq7VAaDFtaWIgoaMV0kEEEw3vl7YSf3nN2b29m93Zvd24U/8/bNzHv/92bn7dxHFEXRIRD81e/3z4DX4PIYydYi9oig58G3Xq9H0/8KTo8xCWGbIthbYFeCN+D+PTg6DubdcRgpywZBLmL7Fe0xy8dP7o9YuubcEvAMWDErrlv0z0D4exeSHfAQHPdZGsbPgnc6aJG5/oB7PrYmOhayj2Lin5AvZSHDuDnwReZpoNsGV7PYCGIMZG+CvyYI5F1w20WO/htgx8wxLbqP4KJrbnB9EF4zAegW/ROQ2L/oHoA9PVZkLnnvnwguwFGEIC1F7IUdUBzUOn2zYoP2sGPcc+kf5SvofgK4C37biUAnh5lrYD2lbw/9/aAD8yFHMFfAph1o2j3jdsB1H/u1GEtQp8CbtKCNjv7PYK4WAeUhSXCy35+agHWL/i3Yrwt5bNdqDoHeAb9MApBXwMykgugIkUk5D8Fv0B+GqkhQm4Aqshyyj8RJq9vtdkImXJSbXfPaLVA0o3Wfn9gCdkC8o8+jWwILyGft/qrvO53OFj43wCLy96L+E+cAXQPi4D/QnizqaNzzCX4bm/O+SfCtAUshBi/JjHnJk1noGlUEFwpZL39ycX7mTG5azdnoTEvW14DUhMov8Sv+DRfT+hIx80zrrAEySDtgv13w3XN6flE5TsKmtqNrltYPkxMx2Qpt0NU3zEHZ+qKcEvPLJhy6/VFFMHT+hfm1CSicwpobaJ+Ami9gYfqNegI4J8gvUo/Bjxgiu79wlfeihk6p1tvvTz2uStnFSYK3+0Wn+dn9XidBfUjSRquU7YXQnOJV/+8jOyfXLXDOcEzMNx3T2jaqBrCIL1MWMk03GGbviUFPFLn69LgqZRcnKXiy5+OtIIUwUQTt+Y2qAVkWQhKgxzVtC+jYMsmNSkCWLZDIir0n9ABXnx5XpeziJHve7hed5mf3N6oGEKwUvvYcoFd8lNyoGkCwae/8NN0gL/aeGPS054D9g5BOiD53a32VsiyY9ufLKTFfG5tG2asGUGEn8qOIWZgy/HslACLLZZAwAbra2O+ya0yePuc5AKeJ92oeJ2XNsT/rZ/HjWwM2shid4JjC/EY9AbLnp/f/AfEPofInhFV53Ca40geu48d+FYX3nyMOjCjB+QSocY0RfWtAYwIfFojva3CYndrqE1ugtpHkJD71T0CbgJxPTmOm/QOvtuGpPSrOfQAAAABJRU5ErkJggg=="},1080:{normal:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAABZNJREFUeAHtXEtrG1cU1suO8Qu31DW2oU0fXkQOJPE2KsUYL0oppGnT4GUXgf6A/oD8jJYsCl2EQkl2LYUstHEXLdQlFC9cDM2mtqjwwpVd2/JD/b7JHHE9mas7utJYo8wdGJ07576+891zHzNzR5lMJpPHmcP5Uh2NRiN3cnLy4fHx8aKlYeQkX8BPwz8ty0leNpAzdHp6eiebzb6DMwOSMgMDA+U2kZKXDAk6azNjopPv7u6+CoArIGbSB9ooFAr/WYD2HCdrkTGxWQ4ODt4cGhq6e3Z2NkyQuVyufnR09Ai6DVvQLw1B9Xr9OrrRRyCHYyqP2uHh4cORkZHt55d2v31PEMabLAbjJXhLSShAuILwQ3Szf0VnK/t69lpfXx+E4Z8FyPlzc3Pzm26QQ1Jj9yBOswA7sbGx8cP8/HzdtiWD+XZ2dsYnJiZWoJ+WOHjTr/l8/ifU17WJJ1aCSA5a930aAFnd29v7fmxs7B8xyFbu7+/PDA8Pr2C8GfPLaKB8EvOLbZm6fLF2MbQox4BTVg5jJkdHR+9hML2hAxNFj1mpCHI+F3JATB0N8V0c5BBPrB7ECkDSLIy5i+A4r3lA99SmyyHfeyhr6Xkp3m9XZiqlvBeCsXoQa0PL/l2tVr+GcX9J7dBdKxaL92q12uuiayXL5XIB+T9WyYHnVHA+6HQab1Uv42L3IAEAA9kYSzDypuhgIHrH8Y+Dg4O/iy4oK5XKyNTUFBd/b0gc8nGmejQ3N3ckurjkhREkBoCoIoy9hWtO0d4BXWiXo4dh3OJg/IqStuszlZQdJi+cIIKA4Ryw6RWvCSh4xblZDqS9i/g7iL/kp4ltphIMYbInBBEICLiEO+5bGI+uCDDpcrhlGAA5H0Dv4YO+43sqqaNd2TOCBCjGoBII4MykwxL7TCVYwqQOVFja2HTwprdR+KfwGu8uXCoCcV27p5Iy25VZuPn9djOlKX3s66B+J9MRZGhBPnJtHrgTvt+8SHFAHXacBxkcwRFkIOhcFwtLiymYS4EFuN0CuuAkpuLmLUJY+l7quKAEzipwrgHHGhah3qubTjC1JAjk8IHUbZDyFirjM51O6oo9LxsPOPl4ZRZkXQX+x7iudVKxtov5nuOR00kFvcrLRkXdt307rGG08qAFvxKvcLQInw4+wfms01axRtsio+/tl5FkGbi9h3PED9wL0P3WImvLKK0HccyRnCRne3v7KxDzRxLJIU7iIj7i9BvTg6/aIfa0I7UEcUBWCnoyMzNj8/pWKeJigj5Oerp3BOwQdWSpJQjuqc5WzyKXmIyETbwBO9pGpyVILSmp3UrFqIa7iTcSQWrlaQs7ggwt7ghyBBkYMESnzoP4EhLPwZexPvqSJ8PU6XjSRugy9Lu+VCpxQ4X68vImdDSruXZSbUydB4GcayoBDIfpJE3qCBLDo8rUEYSV9dMgOWE6SZM6glZXV8sg5GcQsMeTYeqEkKBM3SC9uLh4AhI4IIcOykGCUudBQQJM144gA0OpI8gtFA0e4RaKBoLCFoVhOikmdV1MDI8qU0dQ2KIwTCcEpo4gt1CUptdIt1DUEGOrTl0Xa5coR5CBMUeQI8jAgCHaeZAjyMCAITqSB/l7bwxFJSe6m3i1BOEGTv0A93JyzI+EpIk3YEekzGoiLUF4qVZVEi5vbW2d+45CiUtU0Me5LKACdog6stQ+k+ZOUdzEzbIkyPHp6ekv4Lp8jts3W/CI3d/xyqDVoSUIpa3BPa+CHG6G9EiC+IRhtApFog7gfAEP8PM7WW4Jtj60XQybkLjH+LFfiXUFvcro4+Y24I72SrfyIG9jJLrVt6jMbSTXtbTfAtxGa72VVld2P+i1XawfwF8ERkeQgWX3SaaBoIJMjxiIDUnTFd3kBf/elIgvn5NIP7n5H+JLUcZN4rwRAAAAAElFTkSuQmCC",active:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAABapJREFUeAHtnDGIHUUYx9+7aAIhKKgg0aSJYhGREBEhEEJiEwjYhEAajQiaxsJCFNJZWUQbIU3SnU0KtQkoIYJcEK5RAikCERUkxqhERQ1BT+Kdvzl312Xum7c7+2Zn9t18D/7s7Mw38838vt2Z3Xl3bzQajTagOZTlZ2VlZQM6hY5HBmCYG/ar8MeRnQ/CHdDvReeXl5c5rCyhPRE7Zphne+GPgL0DXTHwS3F+A22NGIQ8XQF5L7pZgq8fyV9EG/MkE2HUwD2GlurQ7TTlpyN0ZdVFNnMQUMfoLTSPnFf4eDy+A5nLsQKQhR+Ab0Yf2le6fY7NL+iZLKDEGiRAH0Jf2LDtc2yuoEdi9WuQfgBwHL2HtoToIO08ib63Ydvn2HyE7gnhc2bbAMAetLo4cvwKPTXNYKh/GN22Ydvn2LyNslkLRaYA2Ipu1OFw/jd6DXm/JFLnBKK5/5/x7TTlf6EXxA7llAmEjWjRBlSeU3YePdiGSdHWfFnXdcTuRxTzrbdN99PYAOK0C1SZXwA7OKmH2DyAPivruI7YXELbJ7WVVRkwzIvRLRewMh8bs2Fj5uu7bUDk7UTflLauIzbvo812/ezPgfIYuuQCV8/H7nP0aAmN9EH0W93GTlNugvcm8l5PSj/r/gicTehdG550jt0f6Hn0Croj2ZR5lN9GR9Y9wFADBNaz6OcS4DRH2rmGdofqWzbtAO1hdHFK+Iu00erpKRuwPgMFnvmmyszbE6cYKUjUMRtum3z8qa2DACD3oesSaDsPu3/Q646mNLsrAaDej87ZwOvnlP+ODnX1ofVaEADwq2jNlynkfY12tmhCTaYlAOjd6Mvy6if9Kbpv2nZT1R+bgaRyrn5z/rOIgUQ/733wAQRBA5A4CBoADUBiAond3+XyPzc3p1u3Ljgd8l1PmzoFdYAZsooGICTNDm1pADpAC1nFuQa4nPDav42yk2g/6XX5p9z8fegPjG8BvUH6OsfePs6tCGkRLuBfnuW9Fx+SwP8V+10hghBqET6ZC3wTqGKs5m7v7eO7BuzvrSfDbbjXMXtNQa7baLjswvRMmo59W3ax870DfP2qfRMBExlJUj3JzuTx+RiZp6OZ/Ji+mzG4xhdiUK62g0xBPCVsD/GkEGKgXdsogvCdVL/PKShIAEJ0UBp47DxzlUo+Q4zP2bbkUPPiEdBFOB5r0ZMGQMQSL1MDEI+16EkDIGKJl6kBiMda9KQBELHEy9QAxGMtetIAiFjiZWoA4rEWPWkARCzxMjUAU7BmA+8o+gT9hL5F7yC/f41ybZNK/fKxleoPPc9nfICel+zJv4jWXNiSrclbYzh0SEPoH4DNlX9M6gv5+8h/USqT8jQAEpXmvJcbTJ5rKK+KNQAVCq/EEw3WjzeUV8UagAqFV+LPBuum8qq6BqBC4ZX4oMH6XEN5VaxfSVYoRiPzVFI7rZL2V5IstOZR80Kx4FZ2JsF341c5PM3xVr3A2XbdSNPtCAB3CcsDHF9CC+gmuoZOkb8G/qRW9Q6o0XFepQH+WcXZds2/JhMQ0EU4AfS6Sw1AnYZnmkVY94I8mU00N/O0JKkS8HUvSAITI6+48nUvKAZshw/dC3KAiZWte0GxSDv8NO31NJVXzepTUIXCK6F7QV64Who731atN2EWYd0Lasm0FzP2fHQvqA+ybe+ALr6dbXdpTOuEI6CLcDiWnVrSAHTCFq5SkADwVDCz/6Jaokw1hiABYBBnUg2gBDjNsej7mWna6Fo3yDdiXZ3PSj37O+Eu/Q7yFMTzr/kdnaw+fY/ZdwpayIr+f4PtdcxeU1AxV+oPNnW4CkNNQebnu8wvSJ3t+9bsMMZgVczYzBiLsQ7nJ8uCjTDDhoLcARly633Ivotw7x3KzYEGIHHENQAagMQEErt3vgck7lc27nUKShxqDYAGIDGBxO71DkgcgH8BZp2BRph1okoAAAAASUVORK5CYII="}};e.exports=function(e,t){var n=new o,s=e.path+"/img/"+screen.height+"/";r(null,function(e,o){o.updateChannelsList(function(){n.search=function(e,t){t(!1,[])},n.icons=a,o.getChannels({favorite:!1},function(e,r){var a=r.slice(0,10).map(function(e){var t={normal:s+"placeholder.png",active:s+"placeholder-focus.png"};return e.logo&&(t={normal:core.backend.host+e.logo,active:core.backend.host+e.logo}),(e.censored||e.genre&&e.genre.censored)&&(t={normal:s+"parents-control.png",active:s+"parents-control-focus.png"}),{id:e.id,layout:i.layouts.tvChannel,geometry:i.geometry.horizontal,data:{name:e.name,number:e.number,program:{name:"",progress:0},icon:t,censored:e.censored||e.genre&&e.genre.censored,url:function(t){e.getUrl(t)}},update:function(){var t=this;o.getChannelsEpg({channels:[e]},function(n,o){!n&&o&&o[e.id]&&o[e.id][0]?t.data.program.name=o[e.id][0].title:t.data.program.name=""})},actions:[i.actions.accessControl,i.actions.favorite],onClick:function(){function t(){e.getUrl(function(t,n){!t&&n&&core.intent({action:"play",mime:"content/video",data:{uri:n.url,title:e.name,solution:n.solution||"auto",headless:!0,mediaId:e.id,tvChannel:e,extra:e.extra,retryOnError:!0,stream:!0},events:{}},function(e){})})}e.censored||e.genre&&e.genre.censored?core.accessControl.request(function(e){e||t()}):t()}}});a.length&&a.push({id:-1,layout:i.layouts.tvChannel,data:{name:"See more",icon:{normal:s+"see-more-focus.png",active:s+"see-more.png"}},runApp:!0}),t(null,{provider:n,data:a})})})})}},function(e,t,n){"use strict";e.exports={layouts:{tvChannel:1,video:2,record:3,static:4,application:5},geometry:{square:1,horizontal:2,vertical:3,round:4},actions:{favorite:1,accessControl:2,expandItemContent:3}}},function(e,t,n){"use strict";(function(t){var o,r,i=n(3),a=n(11),s=t("div",{className:"player"},t("div",{link:"$title",className:"player__title"}),t("video",{link:"$video",className:"video-js",width:"544",height:"322"}),t("div",{link:"$liveButton",className:"player__live-button"},gettext("Live")),t("div",{link:"$description",className:"player__description"})),c=new i;function l(){c.events.play&&c.events.play.length&&c.emit("play")}function u(){c.events.end&&c.events.end.length&&c.emit("end")}c.$node=s.$node,c.links=s.links,c.init=function(){var e=this;return this.plugin=videojs(s.links.$video,{controls:!0,preload:!0}),this.plugin.on("play",l),this.plugin.on("ended",u),this.links.$liveButton.addEventListener("click",function(){return e.emit("click:live")}),s.$node},c.playChannel=function(e){var t=this;r!==e&&(r=e,this.links.$title.innerText=e.number+". "+e.name,this.links.$liveButton.classList.remove("player__live-button--visible"),e.getUrl(function(n,r){t.plugin.src({src:r.url}),t.plugin.play().then(function(){clearTimeout(o),o=setTimeout(function(){e.setLast()},a.saveLastChannelTimeout)})}))},c.playEpgProgram=function(e){void 0===e&&(e={}),r=e,this.links.$liveButton.classList.add("player__live-button--visible"),e.uri&&(this.plugin.src({src:e.uri}),this.plugin.play())},c.pause=function(){this.plugin.pause()},e.exports=c}).call(this,n(0)["tag"])},function(e,t,n){"use strict";(function(t){var o=n(5);e.exports=new o({modifiers:["channels"],render:function(e,n){var o=t("div",{className:"channel",title:n.name},t("div",{className:"channel__logo"}),t("div",{className:"channel__name"},n.number,".",n.name));e.appendChild(o.$node)}})}).call(this,n(0)["tag"])},function(e,t,n){"use strict";(function(t){var o=n(5),r="en"===n(2).config.language;var i=new o({modifiers:["program-list"],render:function(e,n){for(var o,i,a,s,c,l,u,d,f="program"+(n.archive?" program--archive":"")+(u=n,d=Date.now()/1e3,u.start<d&&u.end>d?" program--current":""),h=t("div",{className:f,title:n.title},t("div",{className:"program__time"},(o=n.start,a=new Date(1e3*o),s=a.getHours(),c=a.getMinutes(),l=s>=12?"pm":"am",r&&(s=(s%=12)||12),i=s+":"+(c=c<10?"0"+c:c),r&&(i+=" "+l),i)),t("div",{className:"program__name"},n.title));e.firstChild;)e.removeChild(e.firstChild);e.appendChild(h.$node)}});setInterval(function(){i.data.forEach(function(e,t){i.render(i.$node.children[t],e)})},n(2).config.programListUpdateInterval),e.exports=i}).call(this,n(0)["tag"])},function(e,t,n){"use strict";(function(t){var o=n(1),r=t("div",null,t("div",{className:"heading-text"},gettext("Profile")),t("div",{className:"labled-text"},t("div",{className:"labled-text__label"},gettext("Login"),":"),t("div",{className:"labled-text__text",link:"$login"})),t("div",{className:"labled-text"},t("div",{className:"labled-text__label"},gettext("Tariff plan"),":"),t("div",{className:"labled-text__text",link:"$tariff"})),t("div",{className:"labled-text"},t("div",{className:"labled-text__label"},gettext("End date"),":"),t("div",{className:"labled-text__text",link:"$endDate"},"n/a"))),i=new o({$node:r.$node,name:"page",modifiers:["profile","padded"]});i.init=function(e){r.links.$login.innerText=e.login,r.links.$tariff.innerText=e["tariff_plan"],r.links.$endDate.innerText=e["end_date"]||"n/a"},e.exports=i}).call(this,n(0)["tag"])}]);
//# sourceMappingURL=main.js.map